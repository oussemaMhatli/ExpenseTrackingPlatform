<h1>Ajouter transaction</h1>
<br>
<div *ngIf="f.submitted && f.invalid" class="alert alert-danger mt-3">
  Veuillez remplir correctement tous les champs du formulaire !
</div>
<form #f="ngForm" (ngSubmit)="addtransaction(f.value)">

  <div class="row">
    <div class="alert alert-danger" *ngIf="inpdescription.invalid && inpdescription.touched">Veuillez saisir une Description </div>
    <div class="alert alert-danger" *ngIf="categorie.invalid && categorie.touched">Veuillez saisir une categorie </div>
    <div class="alert alert-danger" *ngIf="montant.invalid && montant.touched">Veuillez saisir une montant </div>
    <div class="alert alert-danger" *ngIf="date.invalid && date.touched">Veuillez saisir une date </div>

    <div class="col">
      <div class="form-floating mb-3">
        <input type="text" class="form-control" #inpdescription="ngModel" id="description" placeholder="Description" ngModel name="description" required>
        <label for="description">Description</label>

      </div>

    </div>
    <div class="col">
      <div class="form-floating mb-3">
        <input type="text" class="form-control" id="categorie" placeholder="Categorie" ngModel name="categorie" #categorie="ngModel"
          required>
        <label for="categorie">Categorie</label>
      </div>
    </div>
    <div class="col">
      <div class="form-floating mb-3">
        <input type="number" class="form-control" id="montant" placeholder="Montant" ngModel name="montant" #montant="ngModel" required>
        <label for="montant">Montant</label>
      </div>
    </div>
    <div class="col">
      <div class="form-floating mb-3">
        <input type="datetime-local" class="form-control" id="date" placeholder="Date" ngModel name="date" #date="ngModel" required>
        <label for="date">Date</label>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col d-flex justify-content-end">
      <input type="submit" class="btn btn-primary" value="Ajouter">
    </div>
  </div>
</form>

<hr>
<h1>Liste des transactions</h1>
<br>
<div *ngIf="oldtransaction.length === 0; else transactionsTable">
  <h3 style="display: flex; justify-content: center;">Aucune transaction enregistr√©e pour le moment !</h3>
</div>

<ng-template #transactionsTable>

  <table class="table table-striped table-hover text-center">
    <thead>
      <tr>
        <th scope="col">Description</th>
        <th scope="col">Categorie</th>
        <th scope="col">Montant</th>
        <th scope="col">Date</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of oldtransaction">
        <td>{{ item.description }}</td>
        <td>{{ item.categorie }}</td>
        <td>{{ item.montant }}</td>
        <td>{{ item.date }}</td>
        <td>
          <button class="btn btn-danger mr-2" (click)="supprimer(item._id)">Supprimer</button>
        </td>
      </tr>
    </tbody>
  </table>
</ng-template>
